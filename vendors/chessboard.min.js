/**
 * Minified by jsDelivr using UglifyJS v3.3.21.
 * Original file: /npm/chessboardjs@0.0.1/www/js/chessboard.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var COLUMNS="abcdefgh".split("");function validMove(e){if("string"!=typeof e)return!1;var n=e.split("-");return 2===n.length&&(!0===validSquare(n[0])&&!0===validSquare(n[1]))}function validSquare(e){return"string"==typeof e&&-1!==e.search(/^[a-h][1-8]$/)}function validPieceCode(e){return"string"==typeof e&&-1!==e.search(/^[bw][KQRNBP]$/)}function validFen(e){if("string"!=typeof e)return!1;var n=(e=e.replace(/ .+$/,"")).split("/");if(8!==n.length)return!1;for(var r=0;r<8;r++)if(""===n[r]||8<n[r].length||-1!==n[r].search(/[^kqrbnpKQRNBP1-8]/))return!1;return!0}function validPositionObject(e){if("object"!=typeof e)return!1;for(var n in e)if(!0===e.hasOwnProperty(n)&&(!0!==validSquare(n)||!0!==validPieceCode(e[n])))return!1;return!0}function fenToPieceCode(e){return e.toLowerCase()===e?"b"+e.toUpperCase():"w"+e.toUpperCase()}function pieceCodeToFen(e){var n=e.split("");return"w"===n[0]?n[1].toUpperCase():n[1].toLowerCase()}function fenToObj(e){if(!0!==validFen(e))return!1;for(var n=(e=e.replace(/ .+$/,"")).split("/"),r={},o=8,t=0;t<8;t++){for(var a=n[t].split(""),i=0,s=0;s<a.length;s++){if(-1!==a[s].search(/[1-8]/))i+=parseInt(a[s],10);else r[COLUMNS[i]+o]=fenToPieceCode(a[s]),i++}o--}return r}function objToFen(e){if(!0!==validPositionObject(e))return!1;for(var n="",r=8,o=0;o<8;o++){for(var t=0;t<8;t++){var a=COLUMNS[t]+r;!0===e.hasOwnProperty(a)?n+=pieceCodeToFen(e[a]):n+="1"}7!==o&&(n+="/"),r--}return n=(n=(n=(n=(n=(n=(n=n.replace(/11111111/g,"8")).replace(/1111111/g,"7")).replace(/111111/g,"6")).replace(/11111/g,"5")).replace(/1111/g,"4")).replace(/111/g,"3")).replace(/11/g,"2")}var ChessBoard=function(n,d){d=d||{};var r,o,a,t,i,p,s,c,f,u,h="1.7.0",l=fenToObj("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),v={alpha:"alpha-d2270",black:"black-3c85d",board:"board-b72b1",chessboard:"chessboard-63f37",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",numeric:"numeric-fc462",piece:"piece-417db",row:"row-5277c",sparePieces:"spare-pieces-7492f",sparePiecesBottom:"spare-pieces-bottom-ae20f",sparePiecesTop:"spare-pieces-top-4028b",square:"square-55d63",white:"white-1e1d7"},g={},w=2,b="white",y={},m=!1,P={},O={};function S(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})}function x(e){return JSON.parse(JSON.stringify(e))}function q(e){var n=e.split(".");return{major:parseInt(n[0],10),minor:parseInt(n[1],10),patch:parseInt(n[2],10)}}function C(e,n,r){if(!0===d.hasOwnProperty("showErrors")&&!1!==d.showErrors){var o="ChessBoard Error "+e+": "+n;return"console"===d.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(o),void(2<=arguments.length&&console.log(r))):"alert"===d.showErrors?(r&&(o+="\n\n"+JSON.stringify(r)),void window.alert(o)):void("function"==typeof d.showErrors&&d.showErrors(e,n,r))}}function e(){if("string"==typeof n){if(""===n)return window.alert("ChessBoard Error 1001: The first argument to ChessBoard() cannot be an empty string.\n\nExiting..."),!1;var e=document.getElementById(n);if(!e)return window.alert('ChessBoard Error 1002: Element with id "'+n+'" does not exist in the DOM.\n\nExiting...'),!1;r=$(e)}else if(1!==(r=$(n)).length)return window.alert("ChessBoard Error 1003: The first argument to ChessBoard() must be an ID or a single DOM node.\n\nExiting..."),!1;return window.JSON&&"function"==typeof JSON.stringify&&"function"==typeof JSON.parse?(window.$,!(!$.fn||!$.fn.jquery||!0!==function(e,n){e=q(e),n=q(n);var r=1e4*e.major*1e4+1e4*e.minor+e.patch;return 1e4*n.major*1e4+1e4*n.minor+n.patch<=r}($.fn.jquery,h))||(window.alert("ChessBoard Error 1005: Unable to find a valid version of jQuery. Please include jQuery "+h+" or higher on the page.\n\nExiting..."),!1)):(window.alert("ChessBoard Error 1004: JSON does not exist. Please include a JSON polyfill.\n\nExiting..."),!1)}function T(e){return"fast"===e||"slow"===e||parseInt(e,10)+""==e+""&&0<=e}function E(e){return"function"==typeof d.pieceTheme?d.pieceTheme(e):"string"==typeof d.pieceTheme?d.pieceTheme.replace(/{piece}/g,e):(C(8272,"Unable to build image source for cfg.pieceTheme."),"")}function k(e,n,r){var o='<img src="'+E(e)+'" ';return r&&"string"==typeof r&&(o+='id="'+r+'" '),o+='alt="" class="'+v.piece+'" data-piece="'+e+'" style="width: '+p+"px;height: "+p+"px;",!0===n&&(o+="display:none;"),o+='" />'}function M(e){var n=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(n=["bK","bQ","bR","bB","bN","bP"]);for(var r="",o=0;o<n.length;o++)r+=k(n[o],!1,P[n[o]]);return r}function B(e,n,r,o){var t=$("#"+O[e]),a=t.offset(),i=$("#"+O[n]),s=i.offset(),p=S();$("body").append(k(r,!0,p));var c=$("#"+p);c.css({display:"",position:"absolute",top:a.top,left:a.left}),t.find("."+v.piece).remove();var f={duration:d.moveSpeed,complete:function(){i.append(k(r)),c.remove(),"function"==typeof o&&o()}};c.animate(s,f)}function N(e,n,r){var o=$("#"+P[e]).offset(),t=$("#"+O[n]),a=t.offset(),i=S();$("body").append(k(e,!0,i));var s=$("#"+i);s.css({display:"",position:"absolute",left:o.left,top:o.top});var p={duration:d.moveSpeed,complete:function(){t.find("."+v.piece).remove(),t.append(k(e)),s.remove(),"function"==typeof r&&r()}};s.animate(a,p)}function j(e,n){e=e.split("");var r=COLUMNS.indexOf(e[0])+1,o=parseInt(e[1],10);n=n.split("");var t=COLUMNS.indexOf(n[0])+1,a=parseInt(n[1],10),i=Math.abs(r-t),s=Math.abs(o-a);return s<=i?i:s}function I(e,n,r){for(var o=function(e){for(var n=[],r=0;r<8;r++)for(var o=0;o<8;o++){var t=COLUMNS[r]+(o+1);e!==t&&n.push({square:t,distance:j(e,t)})}n.sort(function(e,n){return e.distance-n.distance});var a=[];for(r=0;r<n.length;r++)a.push(n[r].square);return a}(r),t=0;t<o.length;t++){var a=o[t];if(!0===e.hasOwnProperty(a)&&e[a]===n)return a}return!1}function L(){for(var e in o.find("."+v.piece).remove(),y)!0===y.hasOwnProperty(e)&&$("#"+O[e]).append(k(y[e]))}function U(){o.html(function(e){"black"!==e&&(e="white");var n="",r=x(COLUMNS),o=8;"black"===e&&(r.reverse(),o=1);for(var t="white",a=0;a<8;a++){n+='<div class="'+v.row+'">';for(var i=0;i<8;i++){var s=r[i]+o;n+='<div class="'+v.square+" "+v[t]+" square-"+s+'" style="width: '+p+"px; height: "+p+'px" id="'+O[s]+'" data-square="'+s+'">',!0===d.showNotation&&(("white"===e&&1===o||"black"===e&&8===o)&&(n+='<div class="'+v.notation+" "+v.alpha+'">'+r[i]+"</div>"),0===i&&(n+='<div class="'+v.notation+" "+v.numeric+'">'+o+"</div>")),n+="</div>",t="white"===t?"black":"white"}n+='<div class="'+v.clearfix+'"></div></div>',t="white"===t?"black":"white","white"===e?o--:o++}return n}(b)),L(),!0===d.sparePieces&&("white"===b?(t.html(M("black")),i.html(M("white"))):(t.html(M("white")),i.html(M("black"))))}function D(e){var n=x(y),r=x(e);objToFen(n)!==objToFen(r)&&(!0===d.hasOwnProperty("onChange")&&"function"==typeof d.onChange&&d.onChange(n,r),y=e)}function F(e,n){for(var r in u)if(!0===u.hasOwnProperty(r)){var o=u[r];if(e>=o.left&&e<o.left+p&&n>=o.top&&n<o.top+p)return r}return"offboard"}function J(){o.find("."+v.square).removeClass(v.highlight1+" "+v.highlight2)}function Q(){J();var e=x(y);delete e[f],D(e),L(),a.fadeOut(d.trashSpeed),m=!1}function X(e,n,r,o){"function"==typeof d.onDragStart&&!1===d.onDragStart(e,n,x(y),b)||(m=!0,s=n,c="spare"===(f=e)?"offboard":e,function(){for(var e in u={},O)!0===O.hasOwnProperty(e)&&(u[e]=$("#"+O[e]).offset())}(),a.attr("src",E(n)).css({display:"",position:"absolute",left:r-p/2,top:o-p/2}),"spare"!==e&&$("#"+O[e]).addClass(v.highlight1).find("."+v.piece).css("display","none"))}function Y(e,n){a.css({left:e-p/2,top:n-p/2});var r=F(e,n);r!==c&&(!0===validSquare(c)&&$("#"+O[c]).removeClass(v.highlight2),!0===validSquare(r)&&$("#"+O[r]).addClass(v.highlight2),"function"==typeof d.onDragMove&&d.onDragMove(r,c,f,s,x(y),b),c=r)}function R(e){var n="drop";if("offboard"===e&&"snapback"===d.dropOffBoard&&(n="snapback"),"offboard"===e&&"trash"===d.dropOffBoard&&(n="trash"),!0===d.hasOwnProperty("onDrop")&&"function"==typeof d.onDrop){var r=x(y);"spare"===f&&!0===validSquare(e)&&(r[e]=s),!0===validSquare(f)&&"offboard"===e&&delete r[f],!0===validSquare(f)&&!0===validSquare(e)&&(delete r[f],r[e]=s);var o=x(y),t=d.onDrop(f,e,s,r,o,b);"snapback"!==t&&"trash"!==t||(n=t)}"snapback"===n?function(){if("spare"!==f){J();var e=$("#"+O[f]).offset(),n={duration:d.snapbackSpeed,complete:function(){L(),a.css("display","none"),!0===d.hasOwnProperty("onSnapbackEnd")&&"function"==typeof d.onSnapbackEnd&&d.onSnapbackEnd(s,f,x(y),b)}};a.animate(e,n),m=!1}else Q()}():"trash"===n?Q():"drop"===n&&function(e){J();var n=x(y);delete n[f],n[e]=s,D(n);var r=$("#"+O[e]).offset(),o={duration:d.snapSpeed,complete:function(){L(),a.css("display","none"),!0===d.hasOwnProperty("onSnapEnd")&&"function"==typeof d.onSnapEnd&&d.onSnapEnd(f,e,s)}};a.animate(r,o),m=!1}(e)}function K(e){e.preventDefault()}function z(e){if(!0===d.draggable){var n=$(this).attr("data-square");!0===validSquare(n)&&!0===y.hasOwnProperty(n)&&X(n,y[n],e.pageX,e.pageY)}}function A(e){if(!0===d.draggable){var n=$(this).attr("data-square");!0===validSquare(n)&&!0===y.hasOwnProperty(n)&&(e=e.originalEvent,X(n,y[n],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}}function W(e){!0===d.sparePieces&&X("spare",$(this).attr("data-piece"),e.pageX,e.pageY)}function G(e){!0===d.sparePieces&&X("spare",$(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}function H(e){!0===m&&Y(e.pageX,e.pageY)}function V(e){!0===m&&(e.preventDefault(),Y(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function Z(e){!0===m&&R(F(e.pageX,e.pageY))}function _(e){!0===m&&R(F(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function ee(e){if(!1===m&&!0===d.hasOwnProperty("onMouseoverSquare")&&"function"==typeof d.onMouseoverSquare){var n=$(e.currentTarget).attr("data-square");if(!0===validSquare(n)){var r=!1;!0===y.hasOwnProperty(n)&&(r=y[n]),d.onMouseoverSquare(n,r,x(y),b)}}}function ne(e){if(!1===m&&!0===d.hasOwnProperty("onMouseoutSquare")&&"function"==typeof d.onMouseoutSquare){var n=$(e.currentTarget).attr("data-square");if(!0===validSquare(n)){var r=!1;!0===y.hasOwnProperty(n)&&(r=y[n]),d.onMouseoutSquare(n,r,x(y),b)}}}function re(){$("body").on("mousedown mousemove","."+v.piece,K),o.on("mousedown","."+v.square,z),r.on("mousedown","."+v.sparePieces+" ."+v.piece,W),o.on("mouseenter","."+v.square,ee).on("mouseleave","."+v.square,ne),!0===(navigator&&navigator.userAgent&&-1!==navigator.userAgent.search(/MSIE/))?(document.ondragstart=function(){return!1},$("body").on("mousemove",H).on("mouseup",Z)):$(window).on("mousemove",H).on("mouseup",Z),"ontouchstart"in document.documentElement==!0&&(o.on("touchstart","."+v.square,A),r.on("touchstart","."+v.sparePieces+" ."+v.piece,G),$(window).on("touchmove",V).on("touchend",_))}function oe(){var e;!function(){for(var e=0;e<COLUMNS.length;e++)for(var n=1;n<=8;n++){var r=COLUMNS[e]+n;O[r]=r+"-"+S()}var o="KQRBNP".split("");for(e=0;e<o.length;e++){var t="w"+o[e],a="b"+o[e];P[t]=t+"-"+S(),P[a]=a+"-"+S()}}(),r.html((e='<div class="'+v.chessboard+'">',!0===d.sparePieces&&(e+='<div class="'+v.sparePieces+" "+v.sparePiecesTop+'"></div>'),e+='<div class="'+v.board+'"></div>',!0===d.sparePieces&&(e+='<div class="'+v.sparePieces+" "+v.sparePiecesBottom+'"></div>'),e+="</div>")),o=r.find("."+v.board),!0===d.sparePieces&&(t=r.find("."+v.sparePiecesTop),i=r.find("."+v.sparePiecesBottom));var n=S();$("body").append(k("wP",!0,n)),a=$("#"+n),w=parseInt(o.css("borderLeftWidth"),10),g.resize()}return g.clear=function(e){g.position({},e)},g.destroy=function(){r.html(""),a.remove(),r.unbind()},g.fen=function(){return g.position("fen")},g.flip=function(){return g.orientation("flip")},g.move=function(){if(0!==arguments.length){for(var e=!0,n={},r=0;r<arguments.length;r++)if(!1!==arguments[r])if(!0===validMove(arguments[r])){var o=arguments[r].split("-");n[o[0]]=o[1]}else C(2826,"Invalid move passed to the move method.",arguments[r]);else e=!1;var t=function(e,n){for(var r in e=x(e),n)if(!0===n.hasOwnProperty(r)&&!0===e.hasOwnProperty(r)){var o=e[r];delete e[r],e[n[r]]=o}return e}(y,n);return g.position(t,e),t}},g.orientation=function(e){return 0===arguments.length?b:"white"===e||"black"===e?(b=e,U(),b):"flip"===e?(b="white"===b?"black":"white",U(),b):void C(5482,"Invalid value passed to the orientation method.",e)},g.position=function(e,n){return 0===arguments.length?x(y):"string"==typeof e&&"fen"===e.toLowerCase()?objToFen(y):(!1!==n&&(n=!0),"string"==typeof e&&"start"===e.toLowerCase()&&(e=x(l)),!0===validFen(e)&&(e=fenToObj(e)),void(!0===validPositionObject(e)?!0===n?(!function(e,n,r){if(0!==e.length){!0;for(var o=0,t=0;t<e.length;t++)"clear"===e[t].type&&$("#"+O[e[t].square]+" ."+v.piece).fadeOut(d.trashSpeed,a),"add"===e[t].type&&!0!==d.sparePieces&&$("#"+O[e[t].square]).append(k(e[t].piece,!0)).find("."+v.piece).fadeIn(d.appearSpeed,a),"add"===e[t].type&&!0===d.sparePieces&&N(e[t].piece,e[t].square,a),"move"===e[t].type&&B(e[t].source,e[t].destination,e[t].piece,a)}function a(){++o===e.length&&(L(),!!1===d.hasOwnProperty("onMoveEnd")&&"function"==typeof d.onMoveEnd&&d.onMoveEnd(x(n),x(r)))}}(function(e,n){e=x(e),n=x(n);var r=[],o={};for(var t in n)!0===n.hasOwnProperty(t)&&!0===e.hasOwnProperty(t)&&e[t]===n[t]&&(delete e[t],delete n[t]);for(var t in n)if(!0===n.hasOwnProperty(t)){var a=I(e,n[t],t);!1!==a&&(r.push({type:"move",source:a,destination:t,piece:n[t]}),delete e[a],delete n[t],o[t]=!0)}for(var t in n)!0===n.hasOwnProperty(t)&&(r.push({type:"add",square:t,piece:n[t]}),delete n[t]);for(var t in e)!0===e.hasOwnProperty(t)&&!0!==o.hasOwnProperty(t)&&(r.push({type:"clear",square:t,piece:e[t]}),delete e[t]);return r}(y,e),y,e),D(e)):(D(e),L()):C(6482,"Invalid value passed to the position method.",e)))},g.resize=function(){p=function(){var e=parseInt(r.width(),10);if(!e||e<=0)return 0;for(var n=e-1;n%8!=0&&0<n;)n--;return n/8}(),o.css("width",8*p+"px"),a.css({height:p,width:p}),!0===d.sparePieces&&r.find("."+v.sparePieces).css("paddingLeft",p+w+"px"),U()},g.start=function(e){g.position("start",e)},!0===e()&&1==("string"!=typeof d&&!0!==validPositionObject(d)||(d={position:d}),"black"!==d.orientation&&(d.orientation="white"),b=d.orientation,!1!==d.showNotation&&(d.showNotation=!0),!0!==d.draggable&&(d.draggable=!1),"trash"!==d.dropOffBoard&&(d.dropOffBoard="snapback"),!0!==d.sparePieces&&(d.sparePieces=!1),!0===d.sparePieces&&(d.draggable=!0),(!0!==d.hasOwnProperty("pieceTheme")||"string"!=typeof d.pieceTheme&&"function"!=typeof d.pieceTheme)&&(d.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),!0===d.hasOwnProperty("appearSpeed")&&!0===T(d.appearSpeed)||(d.appearSpeed=200),!0===d.hasOwnProperty("moveSpeed")&&!0===T(d.moveSpeed)||(d.moveSpeed=200),!0===d.hasOwnProperty("snapbackSpeed")&&!0===T(d.snapbackSpeed)||(d.snapbackSpeed=50),!0===d.hasOwnProperty("snapSpeed")&&!0===T(d.snapSpeed)||(d.snapSpeed=25),!0===d.hasOwnProperty("trashSpeed")&&!0===T(d.trashSpeed)||(d.trashSpeed=100),!0===d.hasOwnProperty("position")&&("start"===d.position?y=x(l):!0===validFen(d.position)?y=fenToObj(d.position):!0===validPositionObject(d.position)?y=x(d.position):C(7263,"Invalid value passed to config.position.",d.position)),!0)&&(oe(),re()),g};ChessBoard.fenToObj=fenToObj,ChessBoard.objToFen=objToFen,module.exports=ChessBoard;
//# sourceMappingURL=/sm/48f4c3f3a8392403343b35e6e3cc740ccc9d1314b482a3d2aae9c93857bca887.map